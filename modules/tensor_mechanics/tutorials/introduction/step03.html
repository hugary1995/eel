<!DOCTYPE html><head><meta charset="UTF-8"><title>Step 3 Subdomains and subdomain specific properties | Eel</title><link href="../../../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../../../css/devel_moose.css" type="text/css" rel="stylesheet"></link><link href="../../../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><link href="../../../../css/civet_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../../../contrib/jquery/jquery.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="../../../../index.html" class="left moose-logo hide-on-med-and-down" id="home-button">Eel</a><a href="https://github.com/hugary1995/eel" class="right"><img src="../../../../media/framework/github-logo.png" class="github-mark"></img><img src="../../../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="../../../../eel.html">Documentation</a></li></ul><a href="#" class="sidenav-trigger" data-target="0f8517e4-7b0f-460e-b0c8-cb934adcb1c3"><i class="material-icons">menu</i></a><ul class="sidenav" id="0f8517e4-7b0f-460e-b0c8-cb934adcb1c3"><li><a href="../../../../eel.html">Documentation</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/index.md" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><span class="breadcrumb">modules</span><a href="../.." class="breadcrumb">tensor_mechanics</a><span class="breadcrumb">tutorials</span><a href="." class="breadcrumb">introduction</a><a href="#" class="breadcrumb">step03</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="e115c9b4-7682-463e-8d4c-6fb2862df134" data-section-level="1" data-section-text="Step 3 - Subdomains and subdomain - specific properties"><h1 id="step-3-subdomains-and-subdomain-specific-properties">Step 3 - Subdomains and subdomain-specific properties</h1><p>In this step we&#x27;ll be setting up two subdomains (regions of our sample) with differing material properties.</p><pre class="moose-pre" style="max-height:350px;"><code class="language-text">#
# Added subdomains and subdomain-specific properties
# https://mooseframework.inl.gov/modules/tensor_mechanics/tutorials/introduction/step03.html
#

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  [generated]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 40
    ny = 20
    xmax = 2
    ymax = 1
  []

  # assign two subdomains
  [block1]
    type = SubdomainBoundingBoxGenerator
    input = generated
    block_id = 1
    bottom_left = &#x27;0 0 0&#x27;
    top_right = &#x27;1 1 0&#x27;
  []
  [block2]
    type = SubdomainBoundingBoxGenerator
    input = block1
    block_id = 2
    bottom_left = &#x27;1 0 0&#x27;
    top_right = &#x27;2 1 0&#x27;
  []
[]

[Modules/TensorMechanics/Master]
  [all]
    add_variables = true
  []
[]

[BCs]
  [bottom_x]
    type = DirichletBC
    variable = disp_x
    boundary = bottom
    value = 0
  []
  [bottom_y]
    type = DirichletBC
    variable = disp_y
    boundary = bottom
    value = 0
  []
  [Pressure]
    [top]
      boundary = top
      function = 1e7*t
    []
  []
[]

[Materials]
  [elasticity1]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 1e9
    poissons_ratio = 0.3
    block = 1
  []
  [elasticity2]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 5e8
    poissons_ratio = 0.3
    block = 2
  []
  [stress]
    type = ComputeLinearElasticStress
  []
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;
  end_time = 5
  dt = 1
[]

[Outputs]
  exodus = true
[]
</code></pre><a class="moose-source-filename tooltipped modal-trigger" href="#968799a1-d105-44e2-b07c-cfa46afacf5e">(moose/modules/tensor_mechanics/tutorials/introduction/mech_step03.i)</a><section class="scrollspy" id="6b5ab2a1-f670-4e76-86d2-000db66a005e" data-section-level="2" data-section-text="Input file"><h2 id="input-file">Input file</h2><section id="27fa372d-3be5-4d40-ae2b-b9ddecb7c5f4" data-section-level="3" data-section-text="Mesh"><h3><code>Mesh</code></h3><p>Note that we refine the mesh a bit to better capture the discontinuity we&#x27;re introducing below.</p><p>The <code>block1</code> and <code>block2</code> subblocks are part of a chain of mesh generators, linked by their <code>input</code> parameters. Each of the <a href="../../../../source/meshgenerators/SubdomainBoundingBoxGenerator.html"><code>SubdomainBoundingBoxGenerator</code></a> adds a subdomain definition to the current mesh. Here we define two subdomains, one for the left half of the domain and one for the right.</p></section><section id="f57b933e-5db2-4d07-9f83-a70d98927c99" data-section-level="3" data-section-text="Materials"><h3><code>Materials</code></h3><p>We now define two elasticity tensors in this problem, one on the left half (<code>block = 1</code>) and on on the right half (<code>block = 2</code>), referring to the subdomain IDs we assigned using the mesh generators above.</p><p>Note how the stiffness of the right hand side is only half that of the left hand side.</p></section><section id="9e8ec9c2-b728-468d-9824-07131ee45ca2" data-section-level="3" data-section-text="Executioner"><h3><code>Executioner</code></h3><p>We make a few changes in the Executioner block here, and you should try playing with some of the settings later on.</p><ul class="browser-default"><li><p>We select NEWTON as our <a href="#38a4ee9d-f42b-4de9-82b1-0395f36c6358" class="moose-modal-link modal-trigger">&quot;solve_type&quot;</a>. This is a good (fast) option whenever we have a complete Jacobian for the system. It should give us 1-2 linear iterations for every non-linear iteration. Note that for NEWTON solves MOOSE automatically sets up an <a href="../../../../source/preconditioners/SingleMatrixPreconditioner.html"><code>SMP</code></a> with the <a href="#ad9d5df5-f237-48f6-a713-c406c1710ddb" class="moose-modal-link modal-trigger">&quot;full&quot;</a> option set to <code>true</code> (this can be disabled by setting <a href="#f3fbcfc6-13d0-4a88-88b4-ae9ab108ba07" class="moose-modal-link modal-trigger">&quot;auto_preconditioning&quot;</a> to <code>false</code>). </p></li><li><p>We use LU decomposition to solve the linear problem, this preconditioner is very effective on a small problem like this. (For a more scalable preconditioner for large problems take a look at HYPRE.)</p></li></ul></section></section><section class="scrollspy" id="d932275a-8d5e-4df6-bad6-6d9ecd22fc28" data-section-level="2" data-section-text="Questions"><h2 id="questions">Questions</h2><section id="717fc53a-b4ab-4e80-b01f-8b5b3e606031" data-section-level="3" data-section-text="Visualizing strain"><h3 id="visualizing-strain">Visualizing strain</h3><p>So far we&#x27;ve only looked at the deformation of the mesh. MOOSE can visualize a host of mechanical quantities, and the master action makes this particularly easy.</p><blockquote><p>Try and add output for the vonMises stress in the simulation domain. Take a look at the <a href="#331e3fe3-898b-4fdd-9487-b0b73c8c873e" class="moose-modal-link modal-trigger">&quot;generate_output&quot;</a> parameter...</p></blockquote><p><a href="answer03a.html">Click here for the answer.</a></p></section><section id="f4d06003-f1f0-4880-b810-21b3efb76def" data-section-level="3" data-section-text="Sidebar : Thermal expansion"><h3 id="sidebar-thermal-expansion">Sidebar: Thermal expansion</h3><blockquote><p>In addition to externally applied loading deformation can be induced by internal changes of a material. One common effect is the thermal expansion (or contraction) under temperature changes.</p></blockquote><p><a href="step03a.html">Click here for the sidebar on thermal expansion.</a></p><p>Once you&#x27;ve answered the questions and run this example we will move on to <a href="step04.html">Step 4</a> and setup a cantilever problem that prepares us for contact. </p></section></section></section><div class="moose-modal modal" id="968799a1-d105-44e2-b07c-cfa46afacf5e"><div class="modal-content"><h4>(moose/modules/tensor_mechanics/tutorials/introduction/mech_step03.i)</h4><pre class="moose-pre"><code class="language-text">#
# Added subdomains and subdomain-specific properties
# https://mooseframework.inl.gov/modules/tensor_mechanics/tutorials/introduction/step03.html
#

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  [generated]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 40
    ny = 20
    xmax = 2
    ymax = 1
  []

  # assign two subdomains
  [block1]
    type = SubdomainBoundingBoxGenerator
    input = generated
    block_id = 1
    bottom_left = &#x27;0 0 0&#x27;
    top_right = &#x27;1 1 0&#x27;
  []
  [block2]
    type = SubdomainBoundingBoxGenerator
    input = block1
    block_id = 2
    bottom_left = &#x27;1 0 0&#x27;
    top_right = &#x27;2 1 0&#x27;
  []
[]

[Modules/TensorMechanics/Master]
  [all]
    add_variables = true
  []
[]

[BCs]
  [bottom_x]
    type = DirichletBC
    variable = disp_x
    boundary = bottom
    value = 0
  []
  [bottom_y]
    type = DirichletBC
    variable = disp_y
    boundary = bottom
    value = 0
  []
  [Pressure]
    [top]
      boundary = top
      function = 1e7*t
    []
  []
[]

[Materials]
  [elasticity1]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 1e9
    poissons_ratio = 0.3
    block = 1
  []
  [elasticity2]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 5e8
    poissons_ratio = 0.3
    block = 2
  []
  [stress]
    type = ComputeLinearElasticStress
  []
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;
  end_time = 5
  dt = 1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="moose-modal modal" id="38a4ee9d-f42b-4de9-82b1-0395f36c6358"><div class="modal-content"><h4>solve_type</h4><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>PJFNK, JFNK, NEWTON, FD, LINEAR</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>PJFNK: Preconditioned Jacobian-Free Newton Krylov JFNK: Jacobian-Free Newton Krylov NEWTON: Full Newton Solve FD: Use finite differences to compute Jacobian LINEAR: Solving a linear problem</p></div></div><div class="moose-modal modal" id="ad9d5df5-f237-48f6-a713-c406c1710ddb"><div class="modal-content"><h4>full</h4><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Set to true if you want the full set of couplings between variables simply for convenience so you don't have to set every off_diag_row and off_diag_column combination.</p></div></div><div class="moose-modal modal" id="f3fbcfc6-13d0-4a88-88b4-ae9ab108ba07"><div class="modal-content"><h4>auto_preconditioning</h4><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>When true and a [Preconditioning] block does not exist, the application will attempt to use the correct preconditioning given the Executioner settings.</p></div></div><div class="moose-modal modal" id="331e3fe3-898b-4fdd-9487-b0b73c8c873e"><div class="modal-content"><h4>generate_output</h4><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MultiMooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>cauchy_stress_xx, cauchy_stress_xy, cauchy_stress_xz, cauchy_stress_yx, cauchy_stress_yy, cauchy_stress_yz, cauchy_stress_zx, cauchy_stress_zy, cauchy_stress_zz, creep_strain_xx, creep_strain_xy, creep_strain_xz, creep_strain_yx, creep_strain_yy, creep_strain_yz, creep_strain_zx, creep_strain_zy, creep_strain_zz, creep_stress_xx, creep_stress_xy, creep_stress_xz, creep_stress_yx, creep_stress_yy, creep_stress_yz, creep_stress_zx, creep_stress_zy, creep_stress_zz, deformation_gradient_xx, deformation_gradient_xy, deformation_gradient_xz, deformation_gradient_yx, deformation_gradient_yy, deformation_gradient_yz, deformation_gradient_zx, deformation_gradient_zy, deformation_gradient_zz, elastic_strain_xx, elastic_strain_xy, elastic_strain_xz, elastic_strain_yx, elastic_strain_yy, elastic_strain_yz, elastic_strain_zx, elastic_strain_zy, elastic_strain_zz, mechanical_strain_xx, mechanical_strain_xy, mechanical_strain_xz, mechanical_strain_yx, mechanical_strain_yy, mechanical_strain_yz, mechanical_strain_zx, mechanical_strain_zy, mechanical_strain_zz, pk1_stress_xx, pk1_stress_xy, pk1_stress_xz, pk1_stress_yx, pk1_stress_yy, pk1_stress_yz, pk1_stress_zx, pk1_stress_zy, pk1_stress_zz, pk2_stress_xx, pk2_stress_xy, pk2_stress_xz, pk2_stress_yx, pk2_stress_yy, pk2_stress_yz, pk2_stress_zx, pk2_stress_zy, pk2_stress_zz, plastic_strain_xx, plastic_strain_xy, plastic_strain_xz, plastic_strain_yx, plastic_strain_yy, plastic_strain_yz, plastic_strain_zx, plastic_strain_zy, plastic_strain_zz, small_stress_xx, small_stress_xy, small_stress_xz, small_stress_yx, small_stress_yy, small_stress_yz, small_stress_zx, small_stress_zy, small_stress_zz, strain_xx, strain_xy, strain_xz, strain_yx, strain_yy, strain_yz, strain_zx, strain_zy, strain_zz, stress_xx, stress_xy, stress_xz, stress_yx, stress_yy, stress_yz, stress_zx, stress_zy, stress_zz, effective_plastic_strain, effective_creep_strain, firstinv_stress, firstinv_cauchy_stress, firstinv_pk1_stress, firstinv_pk2_stress, firstinv_small_stress, firstinv_strain, hydrostatic_stress, hydrostatic_cauchy_stress, hydrostatic_pk1_stress, hydrostatic_pk2_stress, hydrostatic_small_stress, intensity_stress, intensity_cauchy_stress, intensity_pk1_stress, intensity_pk2_stress, intensity_small_stress, l2norm_mechanical_strain, l2norm_stress, l2norm_cauchy_stress, l2norm_pk1_stress, l2norm_strain, l2norm_elastic_strain, l2norm_plastic_strain, l2norm_creep_strain, max_principal_mechanical_strain, max_principal_stress, max_principal_cauchy_stress, max_principal_pk1_stress, max_principal_pk2_stress, max_principal_small_stress, max_principal_strain, maxshear_stress, maxshear_cauchy_stress, maxshear_pk1_stress, maxshear_pk2_stress, maxshear_small_stress, mid_principal_mechanical_strain, mid_principal_stress, mid_principal_cauchy_stress, mid_principal_pk1_stress, mid_principal_pk2_stress, mid_principal_small_stress, mid_principal_strain, min_principal_mechanical_strain, min_principal_stress, min_principal_cauchy_stress, min_principal_pk1_stress, min_principal_pk2_stress, min_principal_small_stress, min_principal_strain, secondinv_stress, secondinv_cauchy_stress, secondinv_pk1_stress, secondinv_pk2_stress, secondinv_small_stress, secondinv_strain, thirdinv_stress, thirdinv_cauchy_stress, thirdinv_pk1_stress, thirdinv_pk2_stress, thirdinv_small_stress, thirdinv_strain, triaxiality_stress, triaxiality_cauchy_stress, triaxiality_pk1_stress, triaxiality_pk2_stress, triaxiality_small_stress, volumetric_mechanical_strain, volumetric_strain, vonmises_stress, vonmises_cauchy_stress, vonmises_pk1_stress, vonmises_pk2_stress, directional_stress, directional_strain, axial_stress, axial_strain, axial_plastic_strain, axial_creep_strain, axial_elastic_strain, hoop_stress, hoop_strain, hoop_plastic_strain, hoop_creep_strain, hoop_elastic_strain, radial_stress, radial_strain, spherical_hoop_stress, spherical_hoop_strain, spherical_hoop_plastic_strain, spherical_hoop_creep_strain, spherical_hoop_elastic_strain, spherical_radial_stress, spherical_radial_strain</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Add scalar quantity output for stress and/or strain</p></div></div></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#6b5ab2a1-f670-4e76-86d2-000db66a005e" class="tooltipped" data-position="left" data-tooltip="Input file">Input file</a></li><li><a href="#d932275a-8d5e-4df6-bad6-6d9ecd22fc28" class="tooltipped" data-position="left" data-tooltip="Questions">Questions</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../../../js/init.js"></script><script type="text/javascript" src="../../../../js/navigation.js"></script><script type="text/javascript" src="../../../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../../../js/search_index.js"></script><script type="text/javascript" src="../../../../js/sqa_moose.js"></script>